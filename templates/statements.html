{% extends "base.html" %}
{% block title %}Monthly Statements — FleetNests{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-12 col-md-8 col-lg-7">

    <div class="d-flex align-items-center justify-content-between mb-3">
      <h5 class="fw-bold mb-0"><i class="bi bi-file-earmark-pdf me-2 text-club-blue"></i>Monthly Statements</h5>
      {% if current_user.can_manage_statements %}
      <a href="{{ url_for('admin_statements') }}" class="btn btn-sm btn-club-blue">
        <i class="bi bi-upload me-1"></i>Upload Statement
      </a>
      {% endif %}
    </div>

    {% if statements %}
    <div class="card border-0 shadow-sm">
      <ul class="list-group list-group-flush">
        {% for s in statements %}
        <li class="list-group-item d-flex justify-content-between align-items-center py-3">
          <div>
            <div class="fw-semibold"><i class="bi bi-file-earmark-pdf text-danger me-2"></i>{{ s.display_name }}</div>
            <div class="text-muted small mt-1">
              {{ s.uploaded_at.strftime('%B %d, %Y') }}
              &nbsp;·&nbsp; {{ '%.1f'|format(s.file_size / 1024 / 1024) }} MB
            </div>
          </div>
          <a href="{{ url_for('download_statement', stmt_id=s.id) }}"
             class="btn btn-sm btn-outline-club-blue">
            <i class="bi bi-download me-1"></i>Download
          </a>
        </li>
        {% endfor %}
      </ul>
    </div>
    {% else %}
    <div class="card border-0 shadow-sm">
      <div class="card-body text-muted text-center py-5">
        <i class="bi bi-file-earmark-pdf" style="font-size:2rem;"></i>
        <p class="mt-2 mb-0">No statements have been uploaded yet.</p>
      </div>
    </div>
    {% endif %}

  </div>
</div>
{% endblock %}
