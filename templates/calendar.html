{% extends "base.html" %}
{% block title %}Calendar — {{ club.name if club else 'FleetNests' }}{% endblock %}

{% block head %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css">
{% endblock %}

{% block content %}
{# Hero banner — shows club hero image or a gradient fallback #}
<div class="club-hero mb-3 rounded-3 overflow-hidden shadow-sm">
  {% if branding.has_hero %}
  <img src="{{ url_for('club_hero') }}" alt="{{ club.name if club else 'FleetNests' }}">
  {% endif %}
  <div class="{{ 'club-hero-overlay' if branding.has_hero else 'club-hero-gradient' }}">
    <h2 class="club-hero-title">{{ club.name if club else 'FleetNests' }}</h2>
  </div>
</div>

<div class="d-flex justify-content-between align-items-center mb-3">
  <h5 class="mb-0 fw-bold">
    <i class="bi bi-calendar3 me-2 text-club-blue"></i>Reservation Calendar
    <a href="{{ url_for('help_page') }}#calendar" class="text-muted ms-2"
       data-bs-toggle="tooltip" title="Help: Reading the calendar and booking a date">
      <i class="bi bi-question-circle-fill" style="font-size:0.85rem"></i>
    </a>
  </h5>
  <div>
    <span class="legend-dot bg-club-blue"></span><small class="me-3">Your reservations</small>
    <span class="legend-dot bg-secondary"></span><small>Other members</small>
  </div>
</div>

<div id="calendar"></div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
<script src="{{ url_for('static', filename='js/calendar.js') }}"></script>
<script>
  initCalendar("{{ url_for('api_reservations') }}", "{{ url_for('reserve_detail', res_date='DATE') }}");
</script>
{% endblock %}
