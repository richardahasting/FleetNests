{% extends "base.html" %}
{% block title %}Fuel Log — Admin — {{ club.name if club else 'FleetNests' }}{% endblock %}

{% block content %}
<h5 class="fw-bold mb-4">
  <i class="bi bi-fuel-pump me-2 text-danger"></i>Fuel Log
</h5>

{# Per-member summary #}
{% if stats %}
<div class="card border-0 shadow-sm mb-4">
  <div class="card-header bg-light fw-semibold">Summary by Member</div>
  <div class="table-responsive">
    <table class="table table-sm align-middle mb-0">
      <thead class="table-light">
        <tr>
          <th>Member</th>
          <th class="text-end">Total Gallons</th>
          <th class="text-end">Total Cost</th>
          <th class="text-end">Entries</th>
        </tr>
      </thead>
      <tbody>
        {% for s in stats %}
        <tr>
          <td>{{ s.full_name }}</td>
          <td class="text-end">{{ "%.2f" | format(s.total_gallons | float) }}</td>
          <td class="text-end">
            {% if s.total_cost %}${{ "%.2f" | format(s.total_cost | float) }}{% else %}—{% endif %}
          </td>
          <td class="text-end">{{ s.entries }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% endif %}

{# Full log #}
<div class="card border-0 shadow-sm">
  <div class="card-header bg-light fw-semibold">All Entries</div>
  {% if entries %}
  <div class="table-responsive">
    <table class="table table-hover align-middle mb-0">
      <thead class="table-light">
        <tr>
          <th>Date</th>
          <th>Member</th>
          <th class="text-end">Gallons</th>
          <th class="text-end">$/Gal</th>
          <th class="text-end">Total</th>
          <th>Notes</th>
        </tr>
      </thead>
      <tbody>
        {% for f in entries %}
        <tr>
          <td class="text-nowrap small">{{ f.log_date.strftime('%b %d, %Y') }}</td>
          <td>{{ f.full_name }}</td>
          <td class="text-end">{{ "%.2f" | format(f.gallons | float) }}</td>
          <td class="text-end text-muted small">
            {% if f.price_per_gallon %}${{ "%.3f" | format(f.price_per_gallon | float) }}{% else %}—{% endif %}
          </td>
          <td class="text-end">
            {% if f.total_cost %}${{ "%.2f" | format(f.total_cost | float) }}{% else %}—{% endif %}
          </td>
          <td class="text-muted small">{{ f.notes or '—' }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  {% else %}
  <div class="card-body text-center text-muted py-4">
    No fuel entries yet.
  </div>
  {% endif %}
</div>
{% endblock %}
